<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Builder 2.0</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <script src="/static/script.js" type="text/javascript"></script>

    <div>
        <label for="courses">select a course:</label>
        <select name="courses" id="courses" onchange="fetchClasses()">
            {{range .Courses}}
            <option id="CourseCode" value="{{.CourseCode}}">{{.CourseName}}</option>
            {{end}}
        </select>
    </div>
    <div>
        <label for="classes">select a class:</label>
        <select name="classes" id="classes">
            {{range .Classes}}
            <option value="{{.ClassNum}}">{{.ClassNum}}</option>
            {{end}}
        </select>
    </div>
    <div>
        <p>selected classes:</p>
    </div>

    <script>
        function fetchClasses() { // updates classes based on selected course
            const courseCode = document.getElementById('courses').value; // gets course code eg ACCT
            if (courseCode) {
                // fetch the classes based on selected courseCode
                fetch(`/get-classes?courseCode=${courseCode}`)
                    .then(response => response.json())
                    .then(data => {
                        const classSelect = document.getElementById('classes');
                        classSelect.innerHTML = ''; // clear existing options

                        // populate new options
                        data.forEach(classInfo => {
                            const option = document.createElement('option');
                            option.value = classInfo.ClassCode;
                            option.textContent = classInfo.ClassNum;
                            classSelect.appendChild(option);
                        });
                    })
                    .catch(error => console.error('Error fetching classes:', error));
            }
        }
    </script>
</body>
</html>